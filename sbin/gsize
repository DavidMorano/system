#!/usr/extra/bin/ksh
# GNU Compiler Collection
PN=${0##*/}
VER=15
RF_OK=true
: ${INCDIR:=inc}
INCDIRS=
INCS="inc include"
if [[ ! -d ${INCDIR} ]] ; then
  for INC in ${INCS} ; do
    if [[ -d ${INC} ]] ; then
      INCDIR=${INC}
      break
    fi
  done
  if [[ ! -d ${INCDIR} ]] ; then
    if [[ -n "${REPOROOT}" ]] && [[ -d "${REPOROOT}" ]] ; then
      A=${REPOROOT}/include
      if [[ -d "${A}" ]] ; then
        INCDIR=${A}
      fi
    fi
  fi
fi
if [[ -n "${INCDIR}" ]] && [[ -d "${INCDIR}" ]] ; then
  INCDIRS="-I${INCDIR}"
fi
# execution-character-set option
EOPT=
if [[ -n "${LANG}" ]] ; then
  EOPT="-finput-charset=${LANG##*.} -fexec-charset=${LANG##*.}"
fi
# program
PROG="print -u2 -- ${PN}: no-program"
if ${RF_OK} ; then
  POPT="-pthread"
  COPT=
  MOPT="-fmodules-ts -Wno-global-module"
  OPTS=
  case ${PN} in
  gcpp*)
    PROG=gcpp${VER}
    OPTS="${EOPT} ${INCDIRS}"
    ;;
  gcc*)
    PROG=gcc${VER}
    OPTS="${EOPT} ${POPT} ${COPT} ${INCDIRS}"
    ;;
  gpp*|gxx*)
    PROG=gxx${VER}
    OPTS="${EOPT} ${POPT} ${COPT} ${MOPT} ${INCDIRS}"
    ;;
  gld*)
    PROG=gld${VER}
    OPTS="${POPT}"
    ;;
  granlib*)
    PROG=granlib${VER}
    ;;
  gar*)
    PROG=gar${VER}
    ;;
  gnm) 
    PROG=gnm${VER} 
    ;;
  gnmd)
    PROG=gnm${VER}
    OPTS="--demangle"
    ;;
  gcov*)
    PROG=gcov${VER}
    ;;
  gsize*|gsz*)
    PROG=size
    ;;
  esac
  ${PROG} ${OPTS} "${@}"
fi

